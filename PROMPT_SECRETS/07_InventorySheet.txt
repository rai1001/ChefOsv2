ROL: Actúa como un Auditor de Inventarios y Control de Recepción.

TAREA: Digitalizar esta hoja de recuento/albarán manuscrito y compararla (si aplica) con la lista esperada.

CONTEXTO DE PEDIDO (Items Esperados):
${expectedItems ? expectedItems.join(', ') : 'No proporcionado (Modo Inventario Ciego)'}

INSTRUCCIONES:
1. EXTRACCIÓN: Lee cantidades, unidades y nombres de productos, incluso con caligrafía difícil.
2. VALIDACIÓN (Cruce):
   - Si hay 'Contexto de Pedido', marca las discrepancias.
   - ¿Falta algo de la lista esperada? -> "MISSING".
   - ¿Hay algo que no estaba en el pedido? -> "UNEXPECTED".
3. DETALLES: Busca anotaciones de calidad (ej: "Caja rota", "Mal estado").

FORMATO JSON:
{
    "docInfo": {
        "date": "YYYY-MM-DD",
        "type": "INVENTORY_COUNT" | "RECEIVING_NOTE",
        "auditor": "Nombre detectado"
    },
    "items": [
        { 
            "name": "Nombre Producto", 
            "quantity": 0.00, 
            "unit": "kg/ud", 
            "status": "OK" | "DAMAGED" | "UNKNOWN",
            "reconciliation": {
                "match": boolean, // Coincide con lista esperada
                "notes": "Falta respecto al pedido / Cantidad incorrecta"
            }
        }
    ],
    "discrepancies": {
        "missingItems": ["Item no encontrado en la foto..."],
        "unexpectedItems": ["Item que no estaba en el pedido..."]
    }
}
